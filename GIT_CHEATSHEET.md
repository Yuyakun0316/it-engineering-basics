# Git 基本操作チートシート

Gitのワークフローとコマンドの備忘録。

## 🔄 基本ワークフロー
1. **Working Directory** (作業場所): ファイルを編集する
2. **Staging Area** (レジ前): `git add` でコミットする準備をする
3. **Local Repository** (保管庫): `git commit` で記録を残す
4. **Remote Repository** (共有場所): `git push` でGitHubへアップロード

## 🛠 主要コマンド
### 1. 状態の確認
- `git status` : 今、どのファイルが変更・追加されているか確認（一番よく使う！）
- `git diff` : 具体的にどの行を書き換えたか、差分を確認
- `git log` : これまでのコミット履歴を一覧表示

### 2. 記録の保存
- `git add .` : 全ての変更ファイルをステージングエリア（レジ）に送る
- `git commit -m "メッセージ"` : ステージングされた変更を正式に記録する

### 3. リモートとの連携
- `git push origin [ブランチ名]` : ローカルの記録をGitHubへ送る
- `git pull origin [ブランチ名]` : GitHubの最新の状態をローカルに取り込む

### 4. 設定
- `git config --global user.name "名前"` : ユーザー名の設定
- `git config --global user.email "メール"` : メールの設定

## 🚀 応用・チーム開発編

### 1. ブランチの作成
- `git branch [ブランチ名]`
- **どのような時**: 本番用のコードを汚さずに、新しい機能の開発やバグ修正を始めたい時。

### 2. ブランチの切り替え
- `git checkout [ブランチ名]`
- **どのような時**: 別の作業ブランチに移動したい時。

### 3. ブランチの作成と切り替えを同時に行う
- `git checkout -b [ブランチ名]`
- **どのような時**: 新しい作業を今すぐ開始したい時。

### 4. ブランチの合流 (Merge)
- `git merge [取り込みたいブランチ名]`
- **どのような時**: サブブランチでの作業が完了し、その内容をメイン（main）に合体させたい時。

### 5. 歴史の整頓 (Rebase)
- `git rebase [親となるブランチ名]`
- **どのような時**: 作業履歴を一直線に綺麗に保ちたい時。または、メインブランチの最新の更新分を自分のブランチの「根っこ」に取り込みたい時。

## 📍 HEADの操作（現在地の移動）

### 1. 特定のコミットに直接移動する
- `git checkout [コミットのハッシュ値]`
- **どのような時**: ブランチ単位ではなく、過去の特定のセーブポイント（コミット）にピンポイントで戻って中身を確認したい時

## ↩️ 相対リファレンス（位置の相対指定）

### 1. 一つ前のコミットに移動する
- `git checkout [ブランチ名 or HEAD]^`
- **どのような時**: ハッシュ値を調べずに、現在の場所（または特定のブランチ）から「1つ前の状態」にサクッと戻りたい時。

### 💡 覚えておくと便利な指定方法
- `HEAD^` : 現在地から1つ戻る
- `main^` : mainブランチの最新の1つ前に戻る
- `HEAD^^` : 現在地から2つ戻る

### 2. 数個前のコミットに一気に移動する (~)
- `git checkout HEAD~[数字]`
- **どのような時**: `^` をたくさん打つのが面倒な時。一気に3つ、4つと遡りたい時

## 🛠 ブランチの強制移動 (Force Move)

### 1. 自分が動かずにブランチの指し先を変える
- `git branch -f [ブランチ名] [移動先]`
- **どのような時**: 作業場所（HEAD）は変えずに、特定のブランチが指すコミットを強制的に変更したい時。
- **例**: `git branch -f main HEAD~3` (mainブランチを、今の場所から3つ前の位置に強制的に戻す)

### 💡 checkout と branch -f の使い分けまとめ
- **自分が動きたいとき**：`git checkout [場所]`
  - 現在地（HEAD）が移動する。
- **自分は動かず、ブランチ（ラベル）だけ動かしたいとき**：`git branch -f [ブランチ名] [場所]`
  - 現在地（HEAD）はそのまま。ラベルの指し先だけが変わる。

## ↩️ 作業のやり直し (Undo)

### 1. 過去のコミットをなかったことにする
- `git reset [場所]`
- **どのような時**: まだGitHubに上げていない自分のローカル作業で、完全に過去に戻ってやり直したい時。

### 2. 打ち消し用の新しいコミットを作る
- `git revert [場所]`
- **どのような時**: すでにGitHubに公開済みの歴史を汚さずに、安全に間違いを修正したい時。（共同開発ではこちらが推奨される）

### 💡 違いのまとめ
- **Reset**: 歴史を「削除」する。（自分専用）
- **Revert**: 歴史に「上書き」する。（みんな用）

## 🍒 便利な「いいとこ取り」操作

### 1. 特定のコミットだけをコピーしてくる
- `git cherry-pick [コミット名1] [コミット名2] ...`
- **どのような時**: 他のブランチにある「特定の修正」や「特定の機能」だけを、今の自分のブランチに反映させたい時。

### 💡 MergeやRebaseとの違い
- **Merge/Rebase**: ブランチの「歴史全体」を合流させる（全部入り）。
- **Cherry-pick**: 必要な「コミット単位」で摘み取る（選別）。